<!DOCTYPE>
<html>
<head>
<title>Admin management</title>
    <meta charset="utf-8">
    <meta name="viewpoint" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/custom-styles.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script>
    function del(element){
	    //pass parameter in element and submit form;
	    form=document.getElementById("current_form");
	    var s_id=element.id;
	    document.getElementsByName("parking_name_index")[s_id].value="del"+document.getElementsByName("parking_name_index")[s_id].value;
	    //alert(document.getElementsByName("parking_name_index")[s_id].value)
	    form.method="get";
	    form.action="del"
	    form.submit();

		}

    function edit(element){
	    //pass parameter in element and submit form;
	    form=document.getElementById("current_form");
	    var s_id=element.id;
	    document.getElementsByName("parking_name_index")[s_id].value="edit"+document.getElementsByName("parking_name_index")[s_id].value;
	    //alert(document.getElementsByName("parking_name_index")[s_id].value)
	    form.method="get";
	    form.action="edit"
	    form.submit();
    	}
    </script>

</head>
<body>
<div id=wrapper>
		<div id="sidebar-wrapper">
			<ul class="sidebar-nav">
				<li class="list-group-item list-group-item-info"><a href="checking">Car parking</a></li>
				<li class="list-group-item list-group-item-info"><a href="history">History</a></li>
				<li class="list-group-item list-group-item-info"><a href="adminview">Heat-map</a></li> 
			</ul>
		</div>
			<div id="page-content-wrapper">
				<div class="container-fluid">
					<div class="row align-items-center">
					<div class="col-12">

						<h1>
							General information
						</h1>
						<br>
						<br>
						<br>
						<br>
						<br>


						
					<div class="row justify-content-end">
							<div class="col-2">
							</div>

							<div class="col-6">
                            <table class="table">
                                <thead>

                                <tr>
                                <th scope="col">Name</th>
                                <th scope="col">Capacity</th>
                                <th scope="col">Permission(Y/R)</th>
                                <th scope="col">Ticket</th>
                                <th scope="col">Operation</th>
                                </tr>

                                </thead>
  
                                <tbody>
  	                            <form method='get' id="current_form">
                                    <% for (var i =0; i<data.length; i++)  { %>
     
                                    <tr>
                                    <th scope="row"><%=data[i].name %></th>
                                    <td><%=data[i].Capacity  %></td>
                                    <td><%=data[i].yellow_permission %>, <%=data[i].red_permission %></td>
                                    <td><%=data[i].tickets %></td>
                                    <input type="hidden" value="<%= data[i].id %>" name="parking_name_index" >
                                    <td>
                                    	<a href="#" form="current_form" onclick="del(this)" id="<%= i %>" >Del</a>/
                                    	<a href="#" form="current_form" onclick="edit(this)" id="<%=i %>">Edit</a>
                                    </td>
                                    </tr>

                                    <% } %>
                                    
                                    <tr>
                                    <td><a href="create"><button type="button" class="btn btn-primary" id="create">insert a new parking lots</button></a></td>
                                    </tr>
                                </form>
                                </tbody>
                            </table>
							</div>

						<div class="col-4">
						</div>
					</div>
				</div>
				</div>
			</div>				
		</div>
	</div>
</body>
</html>